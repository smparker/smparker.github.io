<!DOCTYPE HTML>
<html>
<head>
<script>
window.onload = function () {

var chart = new CanvasJS.Chart("chartContainer", {
	theme: "light2", // "light1", "light2", "dark1", "dark2"
	animationEnabled: true,
	zoomEnabled: true,
	title: {
		text: "CO Rovibrational Spectrum"
	},
  axisX: {
    title: "Frequency (cm^-1)"
  },
  axisY: {
    title: "Intensity (arb.)"
  },
	data: [{
		type: "area",
		dataPoints: []
	}]
});

addDataPoints(100000);
chart.render();

function addDataPoints(noOfDps) {
  var dataout = new Array(noOfDps);
spec = {"frequencies": [2098.8346057299996, 2103.4635947941397, 2108.0574190869193, 2112.61592678338, 2117.13896605856, 2121.6263850875002, 2126.0780320452395, 2130.4937551068206, 2134.8734024472797, 2139.2168222416603, 2143.523862665, 2147.7943718923398, 2152.02819809872, 2156.22518945918, 2160.38519414876, 2164.5080603424994, 2168.59363621544, 2172.6417699426192, 2176.6523096990795, 2180.6251036598596, 2188.45684689454, 2192.3154925185195, 2196.1357850469794, 2199.9175726549593, 2203.6607035175, 2207.3650258096395, 2211.03038770642, 2214.65663738288, 2218.24362301406, 2221.791192775, 2225.29919484074, 2228.76747738632, 2232.1958885867793, 2235.58427661716, 2238.9324896525, 2242.24037586784, 2245.507783438219, 2248.73456053868, 2251.92055534426, 2255.06561603, 4245.601718402, 4250.95599619894, 4256.236936133319, 4261.444386380181, 4266.57819511456, 4271.6382105115, 4276.62428074604, 4281.536253993221, 4286.373978428081, 4291.13730222566, 4295.826073561, 4300.440140609139, 4304.97935154512, 4309.44355454398, 4313.83259778076, 4318.1463294304995, 4322.3845976682405, 4326.54725066902, 4330.6341366078805, 4334.64510365986, 4342.43867380334, 4346.22097324492, 4349.926746499781, 4353.55584174296, 4357.1081071495, 4360.5833908944405, 4363.98154115282, 4367.3024060996795, 4370.5458339100605, 4373.711672759, 4376.799770821541, 4379.809976272721, 4382.74213728758, 4385.5961020411605, 4388.3717187085, 4391.06883546464, 4393.687300484619, 4396.226961943479, 4398.6876680162595, 4401.069266877999, 6361.80533841, 6367.887254206138, 6373.857535402919, 6379.716030175379, 6385.462586698559, 6391.0970531474995, 6396.61927769724, 6402.02910852282, 6407.32639379928, 6412.51098170166, 6417.582720405, 6422.541458084339, 6427.387042914719, 6432.11932307118, 6436.73814672876, 6441.2433620625, 6445.63481724744, 6449.912360458619, 6454.07583987108, 6458.12510365986, 6465.880377066539, 6469.586083034519, 6473.1769660789805, 6476.6528743749595, 6480.0136560975, 6483.259159421639, 6486.389232522419, 6489.403723574879, 6492.30248075406, 6495.085352235, 6497.75218619274, 6500.3028308023195, 6502.73713423878, 6505.05494467716, 6507.256110292499, 6509.340479259839, 6511.307899754219, 6513.158219950679, 6514.89128802426, 6516.506952149999, 8447.445465753999, 8454.257368815737, 8460.91921689572, 8467.430858168978, 8473.79214081056, 8480.002912995498, 8486.063022898838, 8491.972318695618, 8497.730648560879, 8503.337860669657, 8508.793803196999, 8514.09832431794, 8519.251272207519, 8524.252495040779, 8529.101840992758, 8533.799158238498, 8538.344294953038, 8542.73709931142, 8546.97741948868, 8551.065103659857, 8558.781956684139, 8562.410821887319, 8565.886443784579, 8569.20867055096, 8572.377350361498, 8575.392331391238, 8578.253461815219, 8580.96058980848, 8583.51356354606, 8585.912231202998, 8588.156440954339, 8590.246040975118, 8592.180879440379, 8593.960804525157, 8595.585664404498, 8597.055307253439, 8598.36958124702, 8599.528334560278, 8600.53141536826, 8601.378671845998, 10502.522100434002, 10510.066340027739, 10517.42198061172, 10524.58887036098, 10531.566857450562, 10538.3557900555, 10544.955516350841, 10551.365884511619, 10557.58674271288, 10563.61793912966, 10569.459321937, 10575.110739309941, 10580.572039423521, 10585.84307045278, 10590.92368057276, 10595.8137179585, 10600.51303078504, 10605.021467227421, 10609.33887546068, 10613.465103659859, 10621.14341265614, 10624.695189803322, 10628.05517961658, 10631.22323027096, 10634.199189941499, 10636.98290680324, 10639.574229031221, 10641.97300480048, 10644.17908228606, 10646.192309663, 10648.01253510634, 10649.63960679112, 10651.07337289238, 10652.31368158516, 10653.360381044502, 10654.21331944544, 10654.87234496302, 10655.33730577228, 10655.608050048262, 10655.684425966], "intensities": [0.00021952505526510248, 0.0004577924651141645, 0.0009156843553656462, 0.0017562076541671016, 0.003228474479924896, 0.005686189704696265, 0.009590118379635684, 0.015478762962094888, 0.02389076047497676, 0.035228785759991596, 0.04957052137723006, 0.06645679214115553, 0.08471433568366137, 0.10238967434953533, 0.11686772612194106, 0.1252146301774483, 0.12472022924739917, 0.11353819562876374, 0.09125957206081367, 0.05923891483060408, 0.020538791077422725, 0.05923891483060408, 0.09125957206081367, 0.11353819562876374, 0.12472022924739917, 0.1252146301774483, 0.11686772612194106, 0.10238967434953533, 0.08471433568366137, 0.06645679214115553, 0.04957052137723006, 0.035228785759991596, 0.02389076047497676, 0.015478762962094888, 0.009590118379635684, 0.005686189704696265, 0.003228474479924896, 0.0017562076541671016, 0.0009156843553656462, 0.0004577924651141645, 0.00010976252763255124, 0.00022889623255708226, 0.0004578421776828231, 0.0008781038270835508, 0.001614237239962448, 0.0028430948523481326, 0.004795059189817842, 0.007739381481047444, 0.01194538023748838, 0.017614392879995798, 0.02478526068861503, 0.033228396070577766, 0.04235716784183068, 0.051194837174767666, 0.05843386306097053, 0.06260731508872415, 0.062360114623699586, 0.05676909781438187, 0.045629786030406835, 0.02961945741530204, 0.010269395538711363, 0.02961945741530204, 0.045629786030406835, 0.05676909781438187, 0.062360114623699586, 0.06260731508872415, 0.05843386306097053, 0.051194837174767666, 0.04235716784183068, 0.033228396070577766, 0.02478526068861503, 0.017614392879995798, 0.01194538023748838, 0.007739381481047444, 0.004795059189817842, 0.0028430948523481326, 0.001614237239962448, 0.0008781038270835508, 0.0004578421776828231, 0.00022889623255708226, 3.6587509210850414e-05, 7.629874418569409e-05, 0.0001526140592276077, 0.00029270127569451694, 0.0005380790799874827, 0.0009476982841160441, 0.001598353063272614, 0.0025797938270158147, 0.003981793412496127, 0.005871464293331932, 0.008261753562871677, 0.011076132023525921, 0.014119055947276894, 0.017064945724922554, 0.019477954353656842, 0.020869105029574717, 0.020786704874566526, 0.018923032604793957, 0.015209928676802278, 0.009873152471767347, 0.0034231318462371206, 0.009873152471767347, 0.015209928676802278, 0.018923032604793957, 0.020786704874566526, 0.020869105029574717, 0.019477954353656842, 0.017064945724922554, 0.014119055947276894, 0.011076132023525921, 0.008261753562871677, 0.005871464293331932, 0.003981793412496127, 0.0025797938270158147, 0.001598353063272614, 0.0009476982841160441, 0.0005380790799874827, 0.00029270127569451694, 0.0001526140592276077, 7.629874418569409e-05, 9.146877302712603e-06, 1.907468604642352e-05, 3.815351480690193e-05, 7.317531892362924e-05, 0.00013451976999687067, 0.00023692457102901103, 0.0003995882658181535, 0.0006449484567539537, 0.0009954483531240317, 0.001467866073332983, 0.002065438390717919, 0.0027690330058814804, 0.0035297639868192236, 0.0042662364312306385, 0.0048694885884142105, 0.005217276257393679, 0.005196676218641632, 0.004730758151198489, 0.0038024821692005696, 0.0024682881179418368, 0.0008557829615592801, 0.0024682881179418368, 0.0038024821692005696, 0.004730758151198489, 0.005196676218641632, 0.005217276257393679, 0.0048694885884142105, 0.0042662364312306385, 0.0035297639868192236, 0.0027690330058814804, 0.002065438390717919, 0.001467866073332983, 0.0009954483531240317, 0.0006449484567539537, 0.0003995882658181535, 0.00023692457102901103, 0.00013451976999687067, 7.317531892362924e-05, 3.815351480690193e-05, 1.907468604642352e-05, 1.8293754605425207e-06, 3.814937209284704e-06, 7.630702961380386e-06, 1.4635063784725846e-05, 2.6903953999374134e-05, 4.738491420580221e-05, 7.99176531636307e-05, 0.00012898969135079072, 0.00019908967062480632, 0.0002935732146665966, 0.0004130876781435838, 0.0005538066011762961, 0.0007059527973638447, 0.0008532472862461277, 0.0009738977176828421, 0.0010434552514787358, 0.0010393352437283263, 0.0009461516302396979, 0.0007604964338401139, 0.0004936576235883674, 0.00017115659231185603, 0.0004936576235883674, 0.0007604964338401139, 0.0009461516302396979, 0.0010393352437283263, 0.0010434552514787358, 0.0009738977176828421, 0.0008532472862461277, 0.0007059527973638447, 0.0005538066011762961, 0.0004130876781435838, 0.0002935732146665966, 0.00019908967062480632, 0.00012898969135079072, 7.99176531636307e-05, 4.738491420580221e-05, 2.6903953999374134e-05, 1.4635063784725846e-05, 7.630702961380386e-06, 3.814937209284704e-06]}
  var nfreq = spec.frequencies.length;
  var minfreq = 1800;
  var maxfreq = 11000;
  var df = (maxfreq - minfreq) / noOfDps;
  s = 0.5;
  var startfreq = 0;
	for (var i = 0; i < noOfDps; i++) {
    v = minfreq + i * df;
    var yval = 0.002 * Math.random();
    var foundfirst = 0;
    for (var ifreq = startfreq; ifreq < nfreq; ifreq++) {
      w = spec.frequencies[ifreq]
      if (Math.abs(w - v) < 3*s) {
        if (foundfirst == 0) {
          foundfirst = 1;
          startfreq = ifreq;
        }
        I = spec.intensities[ifreq]
        yval += I * Math.exp(-(w - v)*(w - v) / s / s)
      }
      else if ( (w - v) > 3 * s ) {
        break;
      }
    }
		dataout[i] = {x: v, y: yval};
	}
  chart.options.data[0].dataPoints = dataout;
}

}
</script>
</head>
<body>
<div id="chartContainer" style="height: 600px; width: 100%;"></div>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
</body>
</html>
